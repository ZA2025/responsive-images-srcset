<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/styles.css" media="print" onload="this.media='all'">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ruda:wght@400..900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
</head>
<body>
    <h1 class="imageTitle">Responsive Image</h1>
    <div class="image">
        <h2 class="imageNumberOfCol">1 columns</h2>
        <ul class="imageList1">
            <li class="imageItem1"></li>
        </ul>
    </div>
    <div class="image">
        <h2 class="imageNumberOfCol">2 columns</h2>
        <ul class="imageList2">
            <li class="imageItem2"></li>
            <li class="imageItem2"></li>
        </ul>
    </div>
    <div class="image">
        <h2 class="imageNumberOfCol">3 columns</h2>
        <ul class="imageList3">
            <li class="imageItem3"></li>
            <li class="imageItem3"></li>
            <li class="imageItem3"></li>
        </ul>
    </div>
    <div class="image">
        <h2 class="imageNumberOfCol">4 columns</h2>
        <ul class="imageList4">
            <li class="imageItem4"></li>
            <li class="imageItem4"></li>
            <li class="imageItem4"></li>
            <li class="imageItem4"></li>
        </ul>
    </div>

    <script src="js/responsiveImgAttrs.js" type="module" defer></script>
    <script type="module">
        import responsiveImgAttrs from './js/responsiveImgAttrs.js';
        import { springArray } from '/js/arrays.js';
         
        const imageContainer1 = document.querySelectorAll('.imageItem1');
        const imageContainer2 = document.querySelectorAll('.imageItem2');
        const imageContainer3 = document.querySelectorAll('.imageItem3');
        const imageContainer4 = document.querySelectorAll('.imageItem4');

        // function to add images to the DOM
        function appendImage(image, container) {
            const imgElement = document.createElement('img');
            const defaultDimension = image.dimensions.find(dimension => dimension.default === true);
            imgElement.src = image.src;
            imgElement.srcset = image.srcset;
            imgElement.sizes = image.sizes;
            imgElement.alt = image.alt;
            imgElement.classList.add(image.class);
            if (defaultDimension) {
                imgElement.width = defaultDimension.width;
            }

            container.appendChild(imgElement);
        }

        // Album with 1 column
        const album1 = responsiveImgAttrs(
            //srcs, sizes, widths, defaultSize, className = "", alt = "", heights = []
            springArray.map(src => `placeholders/${src}`),
            "(min-width: 1200px) 1200px, calc(100vw - 40px)",
            [600, 800, 1200, 1600],
            800,
            "imageSpring",
            "the alt description",
            [400, 534, 800, 1067]
        );

        // album 2
        const album2 = responsiveImgAttrs(
            springArray.map(src => `placeholders/${src}`),
            "(min-width: 1600px) 285px, (min-width: 1200px) calc((1200px - 40px) / 2), (min-width: 768px) calc(((768px - 40px) - 20px) / 2), calc(100vw - 40px)",
            [600, 800, 1200, 1600],
            800,
            "imageSpring",
            "the alt description",
            [400, 534, 800, 1067]
        );
        
        // Album with 3 columns
        const album3 = responsiveImgAttrs(
            springArray.map(src => `placeholders/${src}`),
            "(min-width: 1600px) 386px, (min-width: 1200px) calc((1200px - 40px) / 3), (min-width: 768px) calc(((768px - 40px) - 20px) / 2), calc(100vw - 40px)",
            [600, 800, 1200, 1600],
            800,
            "imageDogs",
            "the alt description",
            [400, 534, 800, 1067]
        );

        // Album with 4 columns
        const album4 = responsiveImgAttrs(
            springArray.map(src => `placeholders/${src}`),
            "(min-width: 1600px) 285px, (min-width: 1200px) calc((1200px - 60px) / 4), (min-width: 768px) calc(((768px - 40px) - 60px) / 4), calc(((100vw - 40px) - 20px) / 2)",
            [600, 800, 1200, 1600],
            800,
            "imageSpring4",
            "the alt description",
            [400, 534, 800, 1067]
        );
         
        imageContainer4.forEach(div => {
            appendImage(album4, div);
        });

        imageContainer2.forEach(div => {
            appendImage(album2, div);
        });

        imageContainer3.forEach(div => {
            appendImage(album3, div);
        });

        imageContainer1.forEach(div => {
            appendImage(album1, div);
        });

    </script>
</body>
</html>